## Summary

CLARITY's common user interface integration platform is the unified entry point to the CSIS (http://www.myclimateservice.eu/). It integrates the different User Interfaces (Building Blocks) of the ICT Climate Services with the Climate Services Marketplace and the demonstrator showcases and promotes Expert Climate Services. The UI Integration Platform has to combine different independently developed interactive JavaScript/HTML5 Internet Applications into a common user interface that acts and looks more like a desktop application (the CLARITY "Tool") rather than a ordinary website. Moreover, the different Building Blocks to be integrated may potentially use different technologies such as pure client-side HTML5/AJAX technologies (JQuery, Angular, React, ...), server-side technologies (Servlets, Java Server Pages, PHP) or even a mixture of both. The reason for this need comes not only from the fact, that the Building Blocks are developed by different CLARITY partners, but also from the necessity to maximise the re-use of existing components (catalogue, map viewer, e-commerce engine, ...), etc. Thereby, the UI Integration Platform should also provide some basic functionality (user management, per-user customisation, user workspace, etc.) out-of-the box, to let developers concentrate on the development of Building Blocks. Furthermore, myclimateservice.eu should also serve information hub for Climate Services and centralise all outbound CLARITY web activities.

## Functionality

Baseline requirements elicitation and the assessment of presently available Test Cases identified the following functional requirements on this particular Building Block:

**Baseline functionality**

- host independently developed Building Block UIs (RIAs - rich internet applications, widgets, portlets, etc.) 
- non-intrusiveness: the constraints imposed on the development of Building Block UIs that enable them to participate in the platform must be kept a at minimum. Ideally, it should be possible to wrap an independently developed RIA into a widget/portlet/etc. complainant to the specification of the platform with minimal effort. 
- user management and customization options with (optional) user authentication and authorization. To lower the entry hurdle registration must remain optional at the cost of limited functionality for unregistered users - the usual portal / cms features like extensibility, high performance, scalability, security management, support for mobile devices 
- user interface design guidelines and default layout specifications (CSS files) should be provided 

**Functionality requested by CSIS Test Cases**

- from **TC-CSIS-0000**: The Scenario Management Component and the project management user interfaces, respectively, are either embedded (e.g. as iframe) in the **UI Integration Platform (Drupal System)** or directly as part of the UI Integration Platform (e.g. Drupal Module or View).
- from **[TC-CSIS-0900](http://cat.clarity-h2020.eu/node/854/)**:  The UI Integration Platform should provide a button to the end-user to start the Data Package Export Wizard, which will automatically compile and present to the user the data used so far in the study while at the same time presenting to him a form to enable him to indicate further sources of information that needs to be included.
- from **[TC-CSIS-0010](http://cat.clarity-h2020.eu/node/820)**: The UI Integration Platform (Drupal 8) provides all user profile management facilitates (registration, login, approval, ....) and especially support for custom user profile types, or at least roles: end users ("buyer" = project planner, climate resilience manager) and provider ("seller", "expert" = CS or data provider / purveyor).
- from **[TC-CSIS-0031](http://cat.clarity-h2020.eu/node/1003/)**: Either the Marketplace Building Block or the UI Integration Platform should enable the CS provider to create and manage its detailed service portfolio. Also search for specific Climate Service types (sectoral, spatial, etc.) and for the purpose of matchmaking (proposing fitting Expert CS to users during Climate Adaptation Study).
- from **[TC-CSIS-0010 ](http://cat.clarity-h2020.eu/node/820)**: The UI Integration Platform (Drupal 8) has also to offer some APIs that enables other Building Blocks like the Marketplace to access and interact with the user profiles. e.g. to search for specific user types (sectoral, spatial, etc.) for the purpose of matchmaking (finding a suitable "Expert").

**Functionality requested by DC Test Cases**

- from **[TC DC1](http://cat.clarity-h2020.eu/node/791)**: The UI Integration Platform has to provide the possibility for user and expert to exchange context-specific messages through the CSIS, e.g. by creating comments, question and answers.

## Technology Support

There are three main possibilities for the realisation of the UI Integration Platform:

1.  **Portal-based approach**  
    Choose a technological platform that acts like a portal or mashup platform whereby existing components (CLARITY Building Blocks developed as widgets or portlets) are combined into one integrated Rich Internet Application. Ideally this also allows the use of third-party components that comply to a certain standard (e.g. Java Portlet Specification) supported by the technological platform. The advantages of this approach are, that potentially also different technologies (Java Portles and HTML5/JS widgets) could be combined in one platform and that the platform also provides rich functionality (events, inter-component-communication, data storage, user and permission management, user profiles, logging, ...) that can be used by the integrated components (e.g. by calling the a REST web service or JavaScript API that is provided by the platform). The main disadvantage may be, that complexity and restrictions imposed on the components could complicate or the delay their development. In addition, the maintenance and installation effort should not be underestimated. An example for such a platform is Liferay.
2.  **CMS-based approch**  
    Choose a content management system (CMS) and integrate the CLARITY Building Blocks either as independent HTML5/JS widgets (if possible) or develop CLARITY Building Blocks as CMS-specific modules. This approach is similar to the portal-based approach, also regarding advantages and disadvantages. Though there is an important differences. A CMS is generally based on a thin client architecture whereby the majority of business logic resides on the server-side and many synchronous server request result in a full reload of the website when it's content changes. A modern Rich Internet Application follows generally a thick client architecture whereby a large part of the business logic resides on client-side (JavaScript) and asynchronous server requests (AJAX) lead to no page reload at all. Therefore such a  web application is also called Single Page Application (SPA). The possibilities for integrating SPAs into a CMS or a making a CMS behave like a SPA may thus be limited. Examples for popular CMS are drupal and wordpress.
3.  **JavaScript Framework-based approach**  
    Agree on one client-side JavaScript Framework and choose a common boilerplate or template project ("dashboard") that is the outline or frame where the unified components (e.g. CLARITY Building Blocks developed as NPM modules) are combined into one Single Page Application. Consequently, all developers of UI Building Block have to use the same JavaScript Framework as the UI Integration Platform. The main advantage is the flexibility in developing the single components and their coherent appearance, layout and behaviour. The disadvantage is that no other Single Page Application can be integrated easily (probably only as iframe), though the usage of common JavaScript libraries (e.g. leaflet.js) is nevertheless possible. Another disadvantage is, that common base functionality for user management, etc. has possibly to be developed from scratch. There are, however, also existing libraries that can be used for that purpose. Examples for such frameworks are ReactJs or Angular.

A combination of two approaches (Portal/JS Framework or CMS/ JS Framework) may also be possible. However, this depends heavily on the capabilities of the actual portal or CMS implementation.